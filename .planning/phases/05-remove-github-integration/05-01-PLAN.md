---
phase: 05-remove-github-integration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - midl-agent/src/search/legacy/github-client.ts
  - midl-agent/src/search/legacy/issue-searcher.ts
  - midl-agent/src/search/legacy/search-cache.ts
  - midl-agent/src/search/legacy/similarity-scorer.ts
  - midl-agent/src/search/legacy/duplicate-detector.ts
  - midl-agent/src/search/legacy/attachment-fetcher.ts
  - midl-agent/src/search/legacy/solution-extractor.ts
  - midl-agent/src/search/legacy/applicability-scorer.ts
  - midl-agent/src/search/legacy/issue-creator.ts
  - midl-agent/src/search/legacy/constants.ts
  - midl-agent/src/search/legacy/term-extractor.ts
  - midl-agent/src/search/legacy/fix-implementer.ts
  - midl-agent/src/types/legacy/search-types.ts
  - .gitignore
autonomous: true

must_haves:
  truths:
    - "GitHub-dependent source files are in legacy/ subdirectories"
    - "Legacy directories are gitignored so they don't ship"
    - "DiagnosticReportGenerator, BugReportGenerator, and SearchConfig remain in their original locations"
  artifacts:
    - path: "midl-agent/src/search/legacy/"
      provides: "Segregated GitHub-dependent modules"
    - path: ".gitignore"
      provides: "Ignores legacy directories"
      contains: "legacy/"
  key_links:
    - from: ".gitignore"
      to: "midl-agent/src/search/legacy/"
      via: "gitignore pattern"
      pattern: "legacy/"
---

<objective>
Move GitHub-dependent source files to legacy/ directories and gitignore them.

Purpose: Segregate all GitHub integration code (search, duplicate detection, issue creation, scoring) without deleting it, preserving it for potential future use while keeping the shipping codebase clean.
Output: GitHub files moved to legacy/, .gitignore updated.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@midl-agent/src/search/workflow-orchestrator.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Move GitHub-dependent files to legacy/ directories</name>
  <files>
    midl-agent/src/search/legacy/
    midl-agent/src/types/legacy/
  </files>
  <action>
Create `midl-agent/src/search/legacy/` and `midl-agent/src/types/legacy/` directories.

Move (copy then delete original) the following files into `midl-agent/src/search/legacy/`:
- github-client.ts
- issue-searcher.ts
- search-cache.ts
- similarity-scorer.ts
- duplicate-detector.ts
- attachment-fetcher.ts
- solution-extractor.ts
- applicability-scorer.ts
- issue-creator.ts
- constants.ts
- term-extractor.ts
- fix-implementer.ts

Move into `midl-agent/src/types/legacy/`:
- search-types.ts

Also move all corresponding `.test.ts` files into the legacy/ directories.

**DO NOT move** these files (they stay in their original locations):
- diagnostic-report-generator.ts (still needed)
- bug-report-generator.ts (still needed for report formatting)
- search-config.ts (still needed for config loading)
- workflow-orchestrator.ts (will be rewritten in Plan 02)

After moving, verify the legacy directories contain all expected files.
  </action>
  <verify>
Run `ls midl-agent/src/search/legacy/` and confirm all 12 source files + test files are present.
Run `ls midl-agent/src/types/legacy/` and confirm search-types.ts is present.
Confirm diagnostic-report-generator.ts, bug-report-generator.ts, search-config.ts, and workflow-orchestrator.ts still exist in midl-agent/src/search/.
  </verify>
  <done>All GitHub-dependent files are in legacy/ directories, non-GitHub files remain in original locations.</done>
</task>

<task type="auto">
  <name>Task 2: Update .gitignore to exclude legacy directories</name>
  <files>.gitignore</files>
  <action>
Add the following entries to `.gitignore` (create the file if it doesn't exist):

```
# Legacy GitHub integration code (segregated in Phase 5)
midl-agent/src/search/legacy/
midl-agent/src/types/legacy/
```

Then run `git rm -r --cached midl-agent/src/search/legacy/ midl-agent/src/types/legacy/` to remove them from git tracking (if they were tracked). Ignore errors if they weren't tracked.
  </action>
  <verify>
Run `git check-ignore midl-agent/src/search/legacy/github-client.ts` and confirm it is ignored.
  </verify>
  <done>.gitignore contains legacy/ patterns and legacy files are not tracked by git.</done>
</task>

</tasks>

<verification>
- `ls midl-agent/src/search/legacy/` shows 12+ files
- `ls midl-agent/src/search/diagnostic-report-generator.ts` still exists
- `git check-ignore midl-agent/src/search/legacy/github-client.ts` returns 0
</verification>

<success_criteria>
GitHub-dependent files segregated into legacy/ directories and gitignored. DiagnosticReportGenerator, BugReportGenerator, and SearchConfig remain available for active use.
</success_criteria>

<output>
After completion, create `.planning/phases/05-remove-github-integration/05-01-SUMMARY.md`
</output>
